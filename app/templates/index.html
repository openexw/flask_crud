{% extends 'base_full.html' %}

{% block title %}
<title>区域经济数据分析可视化系统设计</title>
{% endblock %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/app.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/baidu-ui.css') }}">
<!-- css start -->
{% block css %}
<style>
    div {
    display: block;
}
   .eco-wrapper {
    color: #eef9fe;
    clear: both;
    height: 100%;
}
   .eco-wrapper .map-container {
    position: absolute;
    left: 0;
    top: 54px;
    bottom: 0;
    right: 470px;
}
   .side-panel {
    position: absolute;
    top: 54px;
    right: 0;
    width: 470px;
    background: #474a4f;
    bottom: 0;
    overflow-y: auto;
    overflow-x: hidden;
}
   .eco-wrapper .panel2 {
    color: #fff;
}

   .totalTop {
       padding-top: 20px;
       padding-bottom: 20px;
       background: #34363b;
   }
   .buttonGroupContainer {
    margin: 0;
}
   .eco-wrapper .panel2 {
    color: #fff;
}

   .button_group {
    display: block;
    margin: 0 auto;
    border-radius: 4px;
    padding: 0!important;
    }
   .button_group {
    text-align: center;
    display: inline-block;
}
   .button_group .radio:first-child {
    margin-left: 0;
    border-radius: 4px 0 0 4px;
}
   .button_group .radio.active {
    background: #34363b;
    }

   .button_group .radio {
    display: inline-block;
    border: 1px solid #7f8083;
    background: #535559;
    font-size: 12px;
    color: #eef9fe!important;
    padding: 10px 15px;
    outline: none;
    cursor: pointer;
    margin: 0 0 0 -1px;
}
   .button_group .radio:last-child {
    border-radius: 0 4px 4px 0;
}
   .button_group .radio {
    display: inline-block;
    border: 1px solid #7f8083;
    background: #535559;
    font-size: 12px;
    color: #eef9fe!important;
    padding: 10px 15px;
    outline: none;
    cursor: pointer;
    margin: 0 0 0 -1px;
}



   .timeCurveContainer {
    padding-top: 10px;
    background: #34363b;
    padding-bottom: 10px;
   }
   .eco-wrapper .panel2 .panel-content .listEcoContainer {
    padding: 25px;
    background: #474a4f;
}
   .eco-wrapper .panel2 .panel-content .listEcoContainer .topTitle {
    color: #eef9fe;
}
   .eco-wrapper .panel2 .panel-content .listEcoContainer .topTitle .title {
    float: left;
    border-bottom: none;
    height: auto;
    margin-top: 12px;
}
   .eco-wrapper .panel2 .panel-content .listEcoContainer .topTitle h4 {
    font-weight: 400;
}
   .eco-wrapper .title {
    overflow: hidden;
    height: 70px;
    border-bottom: 1px solid #e8e8e8;
}
   h4 ，h6{
    display: block;
    margin-block-start: 1.33em;
    margin-block-end: 1.33em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    font-weight: bold;
}


     table {
    display: table;
    border-collapse: separate;
    border-spacing: 2px;
    border-color: grey;
}
    .eco-wrapper .panel2 .panel-content .listEcoContainer table tr {
    vertical-align: top;
}
   tr {
    display: table-row;
    vertical-align: inherit;
    border-color: inherit;
}
   .eco-wrapper .panel2 .panel-content .listEcoContainer th {
    vertical-align: middle;
    font-weight: 400;
}

   td, th {
    display: table-cell;
    vertical-align: inherit;
}
   .list-rank-sub, .list-rank-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
    .list-rank-icon {
       display: inline-block;
       background: #e75843;
       color: #fff;
       margin-right: 5px;
       border-radius: 4px;
       font-size: 12px;
       width: 16px;
       height: 16px;
       line-height: 16px;
       text-align: center;
       box-sizing: border-box;
   }
    .list-rank-sub {
    color: #999;
    margin: 8px 0 10px;
    height: 14px;
}
    .list-rank-sub, .list-rank-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
    #allmap {
        height: 100%;
    }
    .economic {
        display: none;
    }
    .economic span {
        cursor: pointer;
    }
</style>
{% endblock %}
<!-- css end -->

{% block content %}
<<<<<<< HEAD
    <div>
        <div class="eco-wrapper">
            <div class="map-container">
        <div style="height: 100%;position: relative">
            <div id="allmap" style="height: 100%;overflow: hidden;position: relative;z-index: 0;background-color: rgb(243,241,236);
            color: rgb(0,0,0);text-align: left"></div>
        </div>
    </div>
            <div class="side-panel">
                <div class="panel2">
                    <div class="panel-content">
                        <div class="totolTop">
                            <div class="buttonGroupContainer">
                        <div class="buttonGroup" style="padding: 1px 2px;border-radius: 4px">
                            <div class="radio active" style="color: white;">
                                数据
                            </div>
                            <div class="radio" style="color:white">
                                图表
                            </div>
=======
<table border="1" cellspacing=0 cellpadding=0>
    <tr style="height:100%;background-color: white">
        <td style="width:50%;color: green">
            <div id="allmap"></div>
        </td>
        <td colspan="2" style="width: 40%">
            <div id="content">
                <div id="tab_bar">
                    <ul>
                        <li id="tab1" onclick="myclick(1)" style="background-color: orange">
                            数据
                        </li>
                        <li id="tab2" onclick="myclick(2)">
                            图表
                        </li>
                    </ul>
                </div>
                <div class="tab_css" id="tab1_content" style="display: block">
                    <div>
                        <table align="center">
                            <tr>
                                <td>GDP</td>
                                <td>单位：万元</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>7826.12</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>7826.12</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>7826.12</td>
                            </tr><tr>
                                <td>4</td>
                                <td>7826.12</td>
                            </tr>

                        </table>

                    </div>
                </div>
                <div class="tab_css" id="tab2_content">
                    <div>
                        <div class="tab2_p" id="tab2_p">
                            <p>图表类型：</p>
>>>>>>> 4e5309d0ce372dc54d597895a320182a5d42e980
                        </div>
                    </div></div>
                        <div class="ecoListContainer scroller">
                            <div class="listEcoContainer">
                        <div class="topTitle clearfix">
                            <h4 class="title">成都市2014年第一产业值</h4>
                        <div class="listEco scroller">
                            <table style="width: 100%;border-collapse: collapse;table-layout: fixed;text-align: center">
                                <thead>
                                <tr style="border-bottom: 1px solid rgb(108,113,118);text-align: left;height:40px;
                                color: rgb(238,249,254);font-size: 12px">
                                    <th style="width: 60px;"></th>
                                    <th style="text-align: left;">时间</th>
                                    <th style="width: 80px;text-align: center;">数据</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    1
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    2
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    3
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    4
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    5
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    6
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    7
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class=" ybp-common-table-list undefined" style="padding: 5px; border-bottom: 1px solid rgb(108, 113, 118); color: rgb(238, 249, 254); font-size: 12px;">
                                    <td>
                                        <div>
                                            <div class="list-rank-title">
                                                <span class="list-rank-icon" style="background: rgb(240, 105, 71);">
                                                    8
                                                </span>
                                            </div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <div>
                                            <div class="list-rank-title">2014/01</div>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="list-rank-title">24.3</div>
                                            <div class="list-rank-sub"></div>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
<<<<<<< HEAD

        </div>

    </div>

=======
        </td>
    </tr>
</table>
<div class="economic">
    <span class="rml-city-btn active">GDP</span>
    <span class="rml-city-btn">第一产业</span>
    <span class="rml-city-btn">第二产业</span>
    <span class="rml-city-btn">第三产业</span>
    <span class="rml-city-btn">固定资产投资总额</span>
    <span class="rml-city-btn">第一产业投资</span>
    <span class="rml-city-btn">第二产业投资</span>
    <span class="rml-city-btn">第三产业投资</span>
    <span class="rml-city-btn">社会消费品零售总额</span>
</div>

    <input type="hidden" name="type">
    <input type="hidden" name="sub_type">
    <input type="hidden" name="city">
>>>>>>> 4e5309d0ce372dc54d597895a320182a5d42e980
{% endblock %}
{% block script %}
<script src="http://api.map.baidu.com/api?v=2.0&ak=in6XhrBGd3XdVIAuh4NoXP0liZi42Lum"></script>
<script type="text/javascript">
    // tab switch
    var myclick = function(v) {
        var llis = document.getElementsByTagName("li");
        for(var i = 0; i < llis.length; i++) {
            var lli = llis[i];
            if(lli == document.getElementById("tab" + v)) {
                lli.style.backgroundColor = "orange";
            } else {
                lli.style.backgroundColor = "gray";
            }
        }
        var divs = document.getElementsByClassName("tab_css");
        for(var i = 0; i < divs.length; i++) {
            var divv = divs[i];
            if(divv == document.getElementById("tab" + v + "_content")) {
                divv.style.display = "block";
            } else {
                divv.style.display = "none";
            }
        }
    }

    /**
        创建地图
    */
    function createMap() {
            // map
        map = new BMap.Map("allmap");
        // 创建地图实例  
        var point = new BMap.Point(116.404, 39.915);
        map.centerAndZoom(point, 15);
        // 根据 IP 定位到当前城市
        let city = new BMap.LocalCity();
        city.get(function(e) {
            let cityName = e.name;
            // 设置导航栏显示
            $('#location .text').text(cityName);
            // 设置地图中心为当前城市
            map.setCenter(cityName);
            $('input[name="city"]').val(cityName)
            map.addEventListener('click', function(){
                $('.economic').show()
            });

        });

        // map.centerAndZoom('德阳', 15);
        // 创建点坐标  
        // var map = new BMap.Map("allmap");  // 创建Map实例
        // map.centerAndZoom("四川",15);      // 初始化地图,用城市名设置地图中心点   
    }
    
    // 给导航栏添加点击事件，并切换地图
    function selectCity() {
        $('#location .model>.rml-city-btn').click(function(e){
            let city = $(this).text();
            $('input[name="city"]').val(city);
            // 样式变化
            $('#location .model>.rml-city-btn').removeClass('active');
            $(this).addClass('active');
            $('#location .text').text(city);
            $('#location .model').hide();
            // 数据变化
            map.centerAndZoom(city, 15);

        });
    }
    

    createMap();
    selectCity();     
</script>

{% endblock %}